<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Friend Finder || Survey</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script type="module" src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule="" src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons/ionicons.js"></script>
    
</head>

<body>
    <div class="jumbotron jumbotron-dark jumbotron-fluid">
        <div class="container">
            <h1 class="display-4">Friend Finder Survey</h1>
            <hr>
            <div class="card">
                <h2 class="card-header">About You <ion-icon name="person"></ion-icon>
                </h2>
                <div class="card-body">
                    <form>
                        <h5><label for="name"> Please Enter Your Name <small id="namehelp"
                                    class="text-muted">(required)</small></label></h5>
                        <div class="row">
                            <div class="col">
                                <input id="name" type="text" class="form-control" placeholder="Name">
                            </div>
                        </div>
                        <br>
                        <h5><label for="IDP"> Provide A Link To A Photo ID <small id="namehelp"
                                    class="text-muted">(required)</small></label></h5>
                        <input id="IDP" type="text" class="form-control" placeholder="link">

                        <hr>
                        <div class="container">

                            <h5>1. Keeping up with politics and current events is important to you.</h5>
                            <br>

                            <div class="input-group col-3">
                                <select class="custom-select" id="choice1"
                                    aria-label="Example select with button addon">
                                    <option selected>Choose...</option>
                                    <option value="1">Strongly Disagree</option>
                                    <option value="2">Somewhat Disagree</option>
                                    <option value="3">Neutral </option>
                                    <option value="4">Somewhat Agree</option>
                                    <option value="5">Strongly Agree</option>
                                </select>

                            </div>
                            <br>
                            <h5>2.You'd rather have a small, tight knit group of fridnds than be<br> widely recognized.
                            </h5>
                            <br>

                            <div class="input-group col-md-3">
                                <select class="custom-select" id="choice2"
                                    aria-label="Example select with button addon">

                                    <option selected>Choose...</option>
                                    <option value="1">Strongly Disagree</option>
                                    <option value="2">Somewhat Disagree</option>
                                    <option value="3">Neutral </option>
                                    <option value="4">Somewhat Agree</option>
                                    <option value="5">Strongly Agree</option>
                                </select>

                            </div>
                            <br>
                            <h5>3. When getting together, you find that having people over/ going<br> to someones house
                                is preferable to hanging out at a bar.</h5>
                            <br>

                            <div class="input-group col-md-3">
                                <select class="custom-select" id="choice3"
                                    aria-label="Example select with button addon">
                                    <option selected>Choose...</option>
                                    <option value="1">Strongly Disagree</option>
                                    <option value="2">Somewhat Disagree</option>
                                    <option value="3">Neutral </option>
                                    <option value="4">Somewhat Agree</option>
                                    <option value="5">Strongly Agree</option>
                                </select>

                            </div>
                            <br>
                            <h5>4. If your friend is upset, your first instinct is to fix the problem<br> rather than
                                offer emotional support. </h5>
                            <br>

                            <div class="input-group col-md-3">
                                <select class="custom-select" id="choice4"
                                    aria-label="Example select with button addon">
                                    <option selected>Choose...</option>
                                    <option value="1">Strongly Disagree</option>
                                    <option value="2">Somewhat Disagree</option>
                                    <option value="3">Neutral </option>
                                    <option value="4">Somewhat Agree</option>
                                    <option value="5">Strongly Agree</option>
                                </select>

                            </div>
                            <br>
                            <h5>5. You are calm under pressure and rarely get upset by stressful events.</h5>
                            <br>
                            <div class="input-group col-md-3">
                                <select class="custom-select" id="choice5"
                                    aria-label="Example select with button addon">
                                    <option selected>Choose...</option>
                                    <option value="1">Strongly Disagree</option>
                                    <option value="2">Somewhat Disagree</option>
                                    <option value="3">Neutral </option>
                                    <option value="4">Somewhat Agree</option>
                                    <option value="5">Strongly Agree</option>
                                </select>

                            </div>
                            <br>
                            <h5>6. You tend to lose interest in a conversation if it turns philisophical.</h5>
                            <br>

                            <div class="input-group col-md-3">
                                <select class="custom-select" id="choice6"
                                    aria-label="Example select with button addon">
                                    <option selected>Choose...</option>
                                    <option value="1">Strongly Disagree</option>
                                    <option value="2">Somewhat Disagree</option>
                                    <option value="3">Neutral </option>
                                    <option value="4">Somewhat Agree</option>
                                    <option value="5">Strongly Agree</option>
                                </select>

                            </div>
                            <br>
                            <h5>7. You rarely reflect on past situations and wonder<br> what you could have done
                                differently. </h5>
                            <br>

                            <div class="input-group col-md-3">
                                <select class="custom-select" id="choice7"
                                    aria-label="Example select with button addon">
                                    <option selected>Choose...</option>
                                    <option value="1">Strongly Disagree</option>
                                    <option value="2">Somewhat Disagree</option>
                                    <option value="3">Neutral </option>
                                    <option value="4">Somewhat Agree</option>
                                    <option value="5">Strongly Agree</option>
                                </select>

                            </div>
                            <br>
                            <h5>8. You feel comfortable walking up to someone you find <br>interesting and striking up a
                                conversation.</h5>
                            <br>

                            <div class="input-group col-md-3">
                                <select class="custom-select" id="choice8"
                                    aria-label="Example select with button addon">
                                    <option selected>Choose...</option>
                                    <option value="1">Strongly Disagree</option>
                                    <option value="2">Somewhat Disagree</option>
                                    <option value="3">Neutral </option>
                                    <option value="4">Somewhat Agree</option>
                                    <option value="5">Strongly Agree</option>
                                </select>

                            </div>
                            <br>
                            <h5>9. You find it easy to empathize with a person who has <br>gone through something you
                                never have.</h5>
                            <br>

                            <div class="input-group col-md-3">
                                <select class="custom-select" id="choice9"
                                    aria-label="Example select with button addon">
                                    <option selected>Choose...</option>
                                    <option value="1">Strongly Disagree</option>
                                    <option value="2">Somewhat Disagree</option>
                                    <option value="3">Neutral </option>
                                    <option value="4">Somewhat Agree</option>
                                    <option value="5">Strongly Agree</option>
                                </select>

                            </div>
                            <br>
                            <h5>10. When it comes to making life-changing choices, you mostly <br>listen to your heart
                                rather than your head.</h5>
                            <br>


                            <div class="input-group col-md-3">
                                <select class="custom-select" id="choice10"
                                    aria-label="Example select with button addon">
                                    <option selected>Choose...</option>
                                    <option value="1">Strongly Disagree</option>
                                    <option value="2">Somewhat Disagree</option>
                                    <option value="3">Neutral </option>
                                    <option value="4">Somewhat Agree</option>
                                    <option value="5">Strongly Agree</option>
                                </select>

                            </div>
                        </div>
                        <br>

                        <br>
                        <button id='submit' type="submit" class="btn btn-lg btn-dark">Submit</button>
                    </form>
                    <hr>
                </div>
            </div>
            <br>
            <a href="/"><button class="btn btn-outline-dark">
                    <ion-icon name="home"></ion-icon>
                </button></a> | <a href="/api/friends"><button class="btn  btn-outline-dark">API Friend
                    Data</button></a>
        </div>
    </div>
    <div class="modal fade" id="resultsModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="exampleModalLabel">Best Match</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h2 id="matchName"></h2>
                    <img id="matchImg" style="width:350px;height:400px;"
                    src="https://via.placeholder.com/400x400"
                        alt="Placehodler image in case match image doesn't show" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

</body>

</html>
<script type="text/javascript">
   $(document).ready(function () {
    $("#submit").on("click", function (event) {
        event.preventDefault();

        function validateForm() {
          var isValid = true;
          $('.form-control').each(function () {
            if ($(this).val() === '') {
              isValid = false;
            }
          });
          $('.custom-select').each(function () {
            if ($(this).val() === "") {
              isValid = false;
            }
          });
          return isValid;
        }
        if (validateForm() == true) {

        var newFriend = {
            name: $("#name").val(),
            photo: $("#IDP").val(),
            scores: [
                $("#choice1").val(),
                $("#choice2").val(),
                $("#choice3").val(),
                $("#choice4").val(),
                $("#choice5").val(),
                $("#choice6").val(),
                $("#choice7").val(),
                $("#choice8").val(),
                $("#choice9").val(),
                $("#choice10").val()
            ]};
             console.log(newFriend);
             var currentURL = window.location.origin;
          $.post(currentURL + "/api/friends", newFriend, function (data) {
          
    
                
                //Posts the result to show the best match 
                $("#matchName").text(data.name);
                $("#matchImg").attr("src", data.photo);
                // Show moda
                alert("You added " + newFriend.name);
            })

          $('.modal').modal();
          $('#name').val("");
          $('#photo').val("");
          $('#one').val("");
          $('#two').val("");
          $('#three').val("");
          $('#four').val("");
          $('#five').val("");
     
    
    } else {
          alert("Please fill out all fields")
        }
        
    });
});
</script>